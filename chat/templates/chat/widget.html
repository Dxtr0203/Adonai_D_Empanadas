{% load static %}
<!-- Simple widget template que usa el script en static/js/chat_widget.js -->
{# Exponer usuario autenticado para que el widget lo use. #}
<button id="chat-toggle" class="btn btn-primary" 
  data-user-id="{% if request.user.is_authenticated %}{{ request.user.id }}{% endif %}"
  data-authenticated="{% if request.user.is_authenticated %}1{% else %}0{% endif %}">
  Chat
</button>

<div id="chat-panel" style="display:none; position:fixed; right:20px; bottom:20px; width:320px; z-index:9999;">
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <strong>Asistente</strong>
      <div>
        <button id="chat-close" class="btn btn-sm btn-light">X</button>
      </div>
    </div>
    <div class="card-body" style="height:300px; overflow:auto;">
      <div id="chat-messages"></div>
      <div id="chat-options" class="mt-2"></div>
    </div>
    <div class="card-footer d-flex">
      <input id="chat-input" class="form-control me-2" placeholder="Escribe tu mensaje...">
      <button id="chat-send" class="btn btn-primary">Enviar</button>
    </div>
  </div>
</div>

<script src="{% static 'js/chat_widget.js' %}"></script>
