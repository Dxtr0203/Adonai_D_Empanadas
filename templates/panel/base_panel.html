{% load static %}
<!doctype html>
<html lang="es" data-theme="light">
<head>
  <meta charset="utf-8">
  <title>{% block title %}Panel | Adonai{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: var(--bg); color: var(--text); }
    .sidebar {
      width: 240px; position: fixed; top:0; bottom:0; left:0;
      background: var(--sidebar-bg); color: var(--sidebar-text);
      padding:1rem;
    }
    .sidebar a {
      color: var(--sidebar-link); text-decoration:none;
      display:block; padding:.5rem .75rem; border-radius:.5rem;
    }
    .sidebar a.active, .sidebar a:hover {
      background: var(--sidebar-hover); color:#fff;
    }
    .content { margin-left: 260px; padding: 1.5rem; }

    .brand { font-weight:700; color:#fff; text-decoration:none; display:block; margin-bottom:1rem;}

    /* 🎨 Variables de tema */
    [data-theme="light"] {
      --bg: #f6f8fb;
      --text: #111827;
      --sidebar-bg: #101828;
      --sidebar-text: #fff;
      --sidebar-link: #cbd5e1;
      --sidebar-hover: #1f2937;
    }
    [data-theme="dark"] {
      --bg: #0f172a;
      --text: #f8fafc;
      --sidebar-bg: #1e293b;
      --sidebar-text: #f1f5f9;
      --sidebar-link: #cbd5e1;
      --sidebar-hover: #334155;
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <a class="brand" href="{% url 'panel:dashboard' %}">🐾 Panel Adonai</a>
    <a href="{% url 'panel:dashboard' %}" class="{% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">Resumen</a>
    <a href="{% url 'panel:inventario_list' %}" class="{% if 'inventario' in request.path %}active{% endif %}">Inventario</a>
    <a href="{% url 'panel:categoria_list' %}" class="{% if 'categorias' in request.path %}active{% endif %}">Categorías</a>
  <a href="{% url 'panel:empleado_list' %}" class="{% if 'empleados' in request.path %}active{% endif %}">Empleados</a>
  <a href="{% url 'panel:cliente_list' %}" class="{% if 'clientes' in request.path %}active{% endif %}">Clientes</a>
    <hr>
    <a href="{% url 'catalogo' %}">Ver Tienda</a>
    {% if request.user.is_authenticated %}
      <a href="{% url 'usuarios:logout' %}">Salir</a>
    {% else %}
      <a href="{% url 'usuarios:login' %}">Ingresar</a>
    {% endif %}
    <hr>
    <!-- 🌙 Toggle modo -->
    <button id="theme-toggle" class="btn btn-sm btn-outline-light mt-2 w-100">
      Cambiar a oscuro 🌙
    </button>
  </div>

  <div class="content">
    {% if messages %}
      {% for m in messages %}
        <div class="alert alert-{{ m.tags }} shadow-sm">{{ m }}</div>
      {% endfor %}
    {% endif %}
    {% block content %}{% endblock %}
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Guardar preferencia en localStorage
    const body = document.documentElement;
    const toggleBtn = document.getElementById("theme-toggle");

    function applyTheme(theme) {
      body.setAttribute("data-theme", theme);
      localStorage.setItem("theme", theme);
      toggleBtn.textContent = theme === "light" ? "Cambiar a oscuro 🌙" : "Cambiar a claro ☀️";
      toggleBtn.classList.toggle("btn-outline-light", theme === "light");
      toggleBtn.classList.toggle("btn-outline-dark", theme === "dark");
    }

    // Leer preferencia al cargar
    const savedTheme = localStorage.getItem("theme") || "light";
    applyTheme(savedTheme);

    toggleBtn.addEventListener("click", () => {
      const newTheme = body.getAttribute("data-theme") === "light" ? "dark" : "light";
      applyTheme(newTheme);
    });
  </script>
</body>
</html>
 
